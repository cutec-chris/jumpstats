<html> <!--manifest="jumpstats.appcache"-->
  <head>
    <title>Task App</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <script src="codebase/dhtmlx.js" type="text/javascript"></script>
    <script src="appbase/promet.js" type="text/javascript"></script>
    <script src="appbase/promet-datastore.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="codebase/fonts/font_awesome/css/font-awesome.min.css"/>
    <link rel="STYLESHEET" type="text/css" href="codebase/dhtmlx.css">
    <script type="text/javascript">
    dhtmlxEvent(window,"load",function(){
    });
    </script>
  </head>
<body>
  <div id="chart_container" style="width:100%;height:350px;"></div>
  <br>
  <p id="x-achse"></p>
  <p id="y-achse"></p>
  <p id="z-achse"></p>
  <br>
  <p id="z-max"></p>
  <p id="z-min"></p>

  <font size=12><a href="javascript:location.reload()">Reset</a></font>

  <script type="text/javascript">
    var chart =  new dhtmlXChart({
    view: "line",
    container: "chart_container",
    value: "#height#",
    label:"#label#"
    });

    if (window.DeviceOrientationEvent) {
      var elem = document.querySelector('#x-achse');
      elem.innerHTML = 'supported';
    }
    var zMax,zMin,counter;
    counter = 0;
    zMin = 100;
    zMax = -100;

    window.ondevicemotion = function(event) {

      if (Math.abs(event.acceleration.z)>1) {
        counter++;
        if (counter>50) {
          counter--;
          chart.remove(chart.first());
        }
        var zValue = '';
        if (Math.abs(event.acceleration.z)>5) {
          zValue = Math.round(event.acceleration.z);
        }
        chart.add({
      		  		height:event.acceleration.z,
                time:counter,
                label:zValue
      			  });
      }
      var x = event.acceleration.x;
      var y = event.acceleration.y;
      var z = event.acceleration.z;
      if (z < zMin) zMin = z;
      if (z > zMax) zMax = z;
      document.querySelector('#x-achse').innerHTML = 'X-Achse:' + x;
      document.querySelector('#y-achse').innerHTML = 'Y-Achse:' + y;
      document.querySelector('#z-achse').innerHTML = 'Z-Achse:' + z;

      document.querySelector('#z-min').innerHTML = 'Z-Min:' + zMin;
      document.querySelector('#z-max').innerHTML = 'Z-Max:' + zMax;

    }
  </script>
</body>
</html>
